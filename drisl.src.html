<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DRISL â€” Deterministic Representation for Interoperable Structures & Links</title>
  </head>
  <body>
    <div id="abstract">
      <p>
        DRISL is a serialization format that is deterministic (so that the same
        data will have the same CID) and that features native support for using
        CIDs as links.
        It is based on CBOR, using a narrow profile of CBOR's "Core" featureset called "[[cborc-42]]", specified formally in <a href="https://datatracker.ietf.org/doc/draft-caballero-cbor-cborc42/">this IETF document</a>.
      </p>
    </div>
    <section>
      <h2>Introduction</h2>
      <p>
        Deterministic encodings that produce the same stream of bytes for any
        given data with the same semantics are particularly useful in a content-addressed
        context. DRISL provides that, compactly encoded as CBOR. Additionally, it supports CBOR's Tag 42 to compactly encode CIDs ([[cid]]) as bytestreams. This CID can be used for content-addressed linking
        between DRISL documents (such as MASL documents), or to resources (best wrapped in MASL documents where renderability as web documents or web apps is desired).
      </p>
      <p>
        DRISL does not fork CBOR, CDE, or dCBOR ([[cbor]], [[cde]], [[dcbor]]), but it is a subset of features defined in CBOR "Core" ([[cborc]]), first defined in the earliest CBOR RFC and largely unaffected by refinements made since.
        Any decoder for any version of CBOR since v1 will be able to read DRISL
        content as conformant CBOR, and with enough carefully configuration of a powerful CBOR library and in some case pre-processing of the data, DRISL can be encoded anywhere CBOR can.
      </p>
    </section>
    <section>
      <h2>Format</h2>
      <p>
        DRISL is an application profile of CBOR ([[cbor]]) that subsets the more established [[cborc]] profile, with the following additional
        constraints:
      </p>
      <ul>
        <li>
          Implementations MUST support Tag 42 in the <a href="https://www.iana.org/assignments/cbor-tags/cbor-tags.xhtml">CBOR
          Tag registry</a>; this tag compactly encodes CIDs as bytestrings, as specified below.
        </li>
        <li>
          Implementations MUST reject all other tags, including any of the tags
          listed in the <a href="https://tools.ietf.org/html/rfc8949#section-3.4">section
          3.4 of RFC 8949</a>.
        </li>
        <li>
          Implementations MUST reject map keys that are not strings.
        </li>
        <li>
          Floating-point numbers MUST always be encoded using the longest
          variant; completely avoiding floating-point numbers is RECOMMENDED to minimize interoperability and tooling issues.
        </li>
      </ul>
      <p>
        All other requirements are as CBOR/c ([[cborc]]).
      </p>
    </section>
    <section>
      <h2>CIDs in CBOR</h2>
      <p>
        CIDs in CBOR are stored in binary format, as CBOR bytestrings under custom tag 42. For historical reasons the null
        byte <code>0x00</code> is prepended to the binary CID before storing in CBOR.
      </p>
      <p>
        For more information, see the [[cbor-tag42]] appendix to the [[drisl]] specification.
      </p>
    </section>
  </body>
</html>
